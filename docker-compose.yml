application:
  build: back-end
  volumes:
    - "./back-end:/var/www"
  links:
    - database
  environment:
    ENV PHP_MEMORY_LIMIT: 512M
    DATABASE_URL: mysql://nursing-home:dsiupodfsj123b@database:3306/nursing-home

client:
  build: front-end
  volumes:
    - "./front-end:/app"
  links:
    - nginx-back

database:
  image: mysql:5.7
  ports:
    - 3306:3306
  volumes:
    - ./.mysql:/var/lib/mysql
  environment:
    MYSQL_ROOT_PASSWORD: root   #ここにroot用のパスワードを記載
    MYSQL_DATABASE: nursing-home #ここにデータベースを記載
    MYSQL_USER: nursing-home #ここにユーザ名を記載
    MYSQL_PASSWORD: dsiupodfsj123b #ここにユーザ用パスワードを記載

nginx-front:
  image: nginx
  ports:
    - 8080:8080
  links:
    - client
  volumes:
    - ./config/nginx/nginx.conf:/etc/nginx/nginx.conf
    - ./config/nginx/angular.conf:/etc/nginx/conf.d/default.conf

nginx-back:
  image: nginx
  ports:
    - 8000:8000
  links:
    - application
  volumes:
    - ./config/nginx/nginx.conf:/etc/nginx/nginx.conf
    - ./config/nginx/symfony.conf:/etc/nginx/conf.d/default.conf
